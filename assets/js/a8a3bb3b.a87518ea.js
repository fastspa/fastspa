"use strict";(globalThis.webpackChunkfastspa_documentation=globalThis.webpackChunkfastspa_documentation||[]).push([[347],{69(e,n,r){r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>c,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"guides/concordance","title":"Sector Concordance","description":"Map emissions data from one sector classification to another (e.g., national inventory sectors to IO sectors).","source":"@site/docs/guides/concordance.md","sourceDirName":"guides","slug":"/guides/concordance","permalink":"/docs/guides/concordance","draft":false,"unlisted":false,"editUrl":"https://docs.fastspa.net/edit/main/docs/docs/guides/concordance.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Multi-Satellite Analysis","permalink":"/docs/guides/multi-satellite"},"next":{"title":"Memory-Efficient Streaming","permalink":"/docs/guides/streaming"}}');var o=r(6070),a=r(8193);const c={sidebar_position:2},s="Sector Concordance",i={},l=[{value:"Why Concordance?",id:"why-concordance",level:2},{value:"Creating a Concordance Matrix",id:"creating-a-concordance-matrix",level:2},{value:"From Supply-Use Tables",id:"from-supply-use-tables",level:3},{value:"Manual Concordance",id:"manual-concordance",level:3},{value:"Using Concordance",id:"using-concordance",level:2},{value:"Option A: Allocate Totals, Then Compute Intensities",id:"option-a-allocate-totals-then-compute-intensities",level:3},{value:"Option B: Use SatelliteWithConcordance",id:"option-b-use-satellitewithconcordance",level:3},{value:"Multiple Satellites with Concordance",id:"multiple-satellites-with-concordance",level:2},{value:"Concordance Metadata",id:"concordance-metadata",level:2},{value:"Best Practices",id:"best-practices",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"sector-concordance",children:"Sector Concordance"})}),"\n",(0,o.jsx)(n.p,{children:"Map emissions data from one sector classification to another (e.g., national inventory sectors to IO sectors)."}),"\n",(0,o.jsx)(n.h2,{id:"why-concordance",children:"Why Concordance?"}),"\n",(0,o.jsx)(n.p,{children:"In many EEIO applications:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Direct intensities come from ",(0,o.jsx)(n.strong,{children:"national inventories"})," (e.g., NIBES by ANZSIC division)"]}),"\n",(0,o.jsxs)(n.li,{children:["IO tables use a ",(0,o.jsx)(n.strong,{children:"different industry classification"})," (e.g., IO Industry Groups)"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"FastSPA provides explicit support for mapping between classifications."}),"\n",(0,o.jsx)(n.h2,{id:"creating-a-concordance-matrix",children:"Creating a Concordance Matrix"}),"\n",(0,o.jsx)(n.h3,{id:"from-supply-use-tables",children:"From Supply-Use Tables"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'import pandas as pd\r\nfrom fastspa import SectorConcordance, ConcordanceMetadata\r\n\r\n# Load supply-use flow data\r\nsut = pd.read_csv("sut_flows_2018.csv")\r\n# Columns: anzsic, ioig, flow_value\r\n\r\nconcordance = SectorConcordance.from_supply_use_table(\r\n    sut,\r\n    source_col="anzsic",     # Source classification (e.g., ANZSIC codes)\r\n    target_col="ioig",       # Target classification (IO sectors)\r\n    value_col="flow_value",\r\n    metadata=ConcordanceMetadata(\r\n        source="ABS Supply-Use Tables 2018",\r\n        method="supply_use_table",\r\n        year=2018,\r\n    ),\r\n)\n'})}),"\n",(0,o.jsx)(n.h3,{id:"manual-concordance",children:"Manual Concordance"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'import numpy as np\r\nfrom fastspa import SectorConcordance\r\n\r\n# Rows: source sectors, Columns: target sectors\r\n# Values: allocation weights (row-normalized)\r\nmatrix = np.array([\r\n    [0.8, 0.2, 0.0],  # Source sector 0 \u2192 80% target 0, 20% target 1\r\n    [0.0, 0.5, 0.5],  # Source sector 1 \u2192 50% target 1, 50% target 2\r\n    [1.0, 0.0, 0.0],  # Source sector 2 \u2192 100% target 0\r\n])\r\n\r\nconcordance = SectorConcordance(\r\n    matrix=matrix,\r\n    source_sectors=["ANZSIC_01", "ANZSIC_02", "ANZSIC_03"],\r\n    target_sectors=["IO_A", "IO_B", "IO_C"],\r\n)\n'})}),"\n",(0,o.jsx)(n.h2,{id:"using-concordance",children:"Using Concordance"}),"\n",(0,o.jsx)(n.h3,{id:"option-a-allocate-totals-then-compute-intensities",children:"Option A: Allocate Totals, Then Compute Intensities"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"# 1. Source emissions (e.g., kt CO2-e by NIBES sector)\r\nE_source = np.array([100, 200, 50])  # kt CO2-e\r\n\r\n# 2. Allocate to IO sectors\r\nE_io = concordance.allocate(E_source)  # kt CO2-e by IO sector\r\n\r\n# 3. Divide by IO output to get intensities\r\nio_output = np.array([1e6, 2e6, 0.5e6])  # AUD\r\nintensities = (E_io * 1e6) / io_output  # kg CO2-e / AUD\r\n\r\n# 4. Run SPA\r\nspa = SPA(A_matrix, intensities, sectors=concordance.target_sectors)\n"})}),"\n",(0,o.jsx)(n.h3,{id:"option-b-use-satellitewithconcordance",children:"Option B: Use SatelliteWithConcordance"}),"\n",(0,o.jsx)(n.p,{children:"For intensity mapping with automatic allocation:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'from fastspa import SPA, SatelliteWithConcordance\r\n\r\n# Source intensities (by NIBES/source sector)\r\nsource_intensities = np.array([1.5, 2.3, 0.8])  # kg CO2-e / AUD\r\n\r\nsatellite = SatelliteWithConcordance(\r\n    intensities=source_intensities,\r\n    concordance=concordance,\r\n    name="carbon",\r\n    unit="kg CO2-e / AUD",\r\n)\r\n\r\n# SPA handles the mapping automatically\r\nspa = SPA(A_matrix, satellite, sectors=concordance.target_sectors)\r\npaths = spa.analyze(sector="Electricity", depth=8)\n'})}),"\n",(0,o.jsx)(n.h2,{id:"multiple-satellites-with-concordance",children:"Multiple Satellites with Concordance"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'satellites = {\r\n    "carbon": SatelliteWithConcordance(\r\n        carbon_intensities, concordance, name="carbon"\r\n    ),\r\n    "water": SatelliteWithConcordance(\r\n        water_intensities, concordance, name="water"\r\n    ),\r\n}\r\n\r\nspa = SPA(A_matrix, satellites, sectors=concordance.target_sectors)\r\nresult = spa.analyze(sector="Manufacturing", depth=8)\n'})}),"\n",(0,o.jsx)(n.h2,{id:"concordance-metadata",children:"Concordance Metadata"}),"\n",(0,o.jsx)(n.p,{children:"Track the source and method of your concordance:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'from fastspa import ConcordanceMetadata\r\n\r\nmetadata = ConcordanceMetadata(\r\n    source="ABS Supply-Use Tables",\r\n    method="supply_use_table",\r\n    year=2018,\r\n    notes="Based on 2018 supply table, column-normalized",\r\n)\r\n\r\n# Attach to concordance\r\nconcordance = SectorConcordance(\r\n    matrix=matrix,\r\n    source_sectors=source_sectors,\r\n    target_sectors=target_sectors,\r\n    metadata=metadata,\r\n)\r\n\r\n# Access later\r\nprint(concordance.metadata.source)\r\nprint(concordance.metadata.year)\n'})}),"\n",(0,o.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Document your concordance"}),": Use ",(0,o.jsx)(n.code,{children:"ConcordanceMetadata"})," to record sources and methods"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Validate sector alignment"}),": Ensure source/target sectors match your data"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Check row sums"}),": Concordance matrices should typically have rows summing to 1.0"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Preserve original data"}),": Keep source emissions separate from allocated values"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8193(e,n,r){r.d(n,{R:()=>c,x:()=>s});var t=r(758);const o={},a=t.createContext(o);function c(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);