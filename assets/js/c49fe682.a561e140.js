"use strict";(globalThis.webpackChunkfastspa_documentation=globalThis.webpackChunkfastspa_documentation||[]).push([[444],{1117(e,t,n){n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"concepts/pathcollection","title":"PathCollection","description":"A PathCollection is a container for paths with built-in filtering, aggregation, export, and post-processing analysis.","source":"@site/docs/concepts/pathcollection.md","sourceDirName":"concepts","slug":"/concepts/pathcollection","permalink":"/docs/concepts/pathcollection","draft":false,"unlisted":false,"editUrl":"https://docs.fastspa.net/edit/main/docs/docs/concepts/pathcollection.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Path Objects","permalink":"/docs/concepts/path-objects"},"next":{"title":"Multi-Satellite Analysis","permalink":"/docs/guides/multi-satellite"}}');var s=n(6070),o=n(8193);const i={sidebar_position:3},r="PathCollection",c={},l=[{value:"Basic Properties",id:"basic-properties",level:2},{value:"Filtering Paths",id:"filtering-paths",level:2},{value:"Getting Top Paths",id:"getting-top-paths",level:2},{value:"Aggregation",id:"aggregation",level:2},{value:"By emission source sector",id:"by-emission-source-sector",level:3},{value:"By supply chain stage",id:"by-supply-chain-stage",level:3},{value:"Semantic aggregation (custom &amp; hierarchical)",id:"semantic-aggregation-custom--hierarchical",level:3},{value:"Network analysis (centrality &amp; bottlenecks)",id:"network-analysis-centrality--bottlenecks",level:2},{value:"Loop detection (circular economy)",id:"loop-detection-circular-economy",level:2},{value:"Export Methods",id:"export-methods",level:2},{value:"To DataFrame",id:"to-dataframe",level:3},{value:"To CSV",id:"to-csv",level:3},{value:"To JSON",id:"to-json",level:3},{value:"Summary",id:"summary",level:2},{value:"Metadata",id:"metadata",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"pathcollection",children:"PathCollection"})}),"\n",(0,s.jsxs)(t.p,{children:["A ",(0,s.jsx)(t.code,{children:"PathCollection"})," is a container for paths with built-in filtering, aggregation, export, and post-processing analysis."]}),"\n",(0,s.jsx)(t.h2,{id:"basic-properties",children:"Basic Properties"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"paths = spa.analyze(sector=42, depth=8)\n\nlen(paths)              # Number of paths found\npaths.coverage          # Sum of all contributions (fraction of total)\npaths.total_intensity   # Total intensity for the target sector\npaths.target_sector     # Index of the analyzed sector\npaths.satellite_name    # Name of the satellite analyzed\npaths.metadata          # AnalysisMetadata object\n"})}),"\n",(0,s.jsx)(t.h2,{id:"filtering-paths",children:"Filtering Paths"}),"\n",(0,s.jsx)(t.p,{children:"Filter paths by various criteria:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# By minimum contribution\nsignificant = paths.filter(min_contribution=0.01)  # Paths > 1%\n\n# By maximum depth\nshallow = paths.filter(max_depth=3)  # Only up to 3 stages\n\n# By sector presence\ncoal_related = paths.filter(contains_sector=15)  # Contains sector 15\n\n# Custom predicate\ncoal_ending = paths.filter(predicate=lambda p: "Coal" in p.sectors[-1])\n\n# Combine multiple filters\nfiltered = paths.filter(min_contribution=0.005, max_depth=5)\n'})}),"\n",(0,s.jsx)(t.h2,{id:"getting-top-paths",children:"Getting Top Paths"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"# Top N paths by contribution\ntop_ten = paths.top(10)\n\n# Equivalent to slicing\ntop_ten = paths[:10]\n"})}),"\n",(0,s.jsx)(t.h2,{id:"aggregation",children:"Aggregation"}),"\n",(0,s.jsx)(t.h3,{id:"by-emission-source-sector",children:"By emission source sector"}),"\n",(0,s.jsx)(t.p,{children:"Sum contributions by the sector where emissions occur (leaf node):"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'hotspots = paths.aggregate_by_sector()\n# Returns: {sector_idx: total_contribution, ...}\n\n# Sort by contribution\nsorted_hotspots = sorted(hotspots.items(), key=lambda x: x[1], reverse=True)\nfor sector_idx, contribution in sorted_hotspots[:5]:\n    print(f"Sector {sector_idx}: {contribution:.2%}")\n'})}),"\n",(0,s.jsx)(t.h3,{id:"by-supply-chain-stage",children:"By supply chain stage"}),"\n",(0,s.jsx)(t.p,{children:"Group paths by the sector at a specific stage:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# Group by first-tier suppliers\nby_tier1 = paths.group_by_stage(1)\n# Returns: {sector_idx: PathCollection, ...}\n\nfor sector_idx, group in by_tier1.items():\n    print(f"Via sector {sector_idx}: {len(group)} paths, {group.coverage:.2%}")\n'})}),"\n",(0,s.jsx)(t.h3,{id:"semantic-aggregation-custom--hierarchical",children:"Semantic aggregation (custom & hierarchical)"}),"\n",(0,s.jsx)(t.p,{children:"Aggregate by leaf sector into user-defined semantic groups:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'mapping = {\n    0: "Primary",\n    1: "Secondary",\n    2: "Services",\n}\n\nby_group = paths.semantic_aggregate(mapping)\n'})}),"\n",(0,s.jsx)(t.p,{children:"Hierarchical aggregation uses multiple mappings to build multi-level keys:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'level_1 = {0: "Goods", 1: "Goods", 2: "Services"}\nlevel_2 = {0: "Agriculture", 1: "Manufacturing", 2: "Services"}\n\nhier = paths.hierarchical_aggregate([level_1, level_2])\n# Keys look like: ("Goods", "Manufacturing")\n'})}),"\n",(0,s.jsx)(t.h2,{id:"network-analysis-centrality--bottlenecks",children:"Network analysis (centrality & bottlenecks)"}),"\n",(0,s.jsx)(t.p,{children:"Treat the extracted paths as a directed weighted supply-chain network:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"edges = paths.edge_weights()              # (downstream, upstream) -> weight\nbc = paths.betweenness_centrality()       # node betweenness\nbottlenecks = paths.bottleneck_sectors()  # ranked bottleneck sectors\n\ntopo = paths.network_topology()           # density, in/out strengths, etc\n"})}),"\n",(0,s.jsx)(t.h2,{id:"loop-detection-circular-economy",children:"Loop detection (circular economy)"}),"\n",(0,s.jsx)(t.p,{children:"Detect repeated-sector cycles in extracted paths:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"loops = paths.loop_analysis()\n\nloops.loop_share\nloops.top_cycles(10)\n"})}),"\n",(0,s.jsx)(t.h2,{id:"export-methods",children:"Export Methods"}),"\n",(0,s.jsx)(t.h3,{id:"to-dataframe",children:"To DataFrame"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"df = paths.to_dataframe()\n# Columns: contribution, contribution_pct, direct_intensity,\n#          cumulative_weight, depth, stage_0, stage_0_name, stage_1, ...\n"})}),"\n",(0,s.jsx)(t.h3,{id:"to-csv",children:"To CSV"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# With metadata header (default)\npaths.to_csv("results.csv")\n\n# Without metadata\npaths.to_csv("results.csv", include_metadata=False)\n'})}),"\n",(0,s.jsx)(t.h3,{id:"to-json",children:"To JSON"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# To file\npaths.to_json("results.json")\n\n# To string\njson_str = paths.to_json()\n'})}),"\n",(0,s.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(t.p,{children:"Generate a text summary:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"print(paths.summary())\n"})}),"\n",(0,s.jsx)(t.h2,{id:"metadata",children:"Metadata"}),"\n",(0,s.jsx)(t.p,{children:"Access analysis metadata for reproducibility:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"meta = paths.metadata\n\nmeta.analysis_date      # When analysis was run\nmeta.sector             # Target sector\nmeta.threshold          # Threshold used\nmeta.threshold_type     # 'percentage' or 'absolute'\nmeta.max_depth          # Maximum depth explored\nmeta.total_intensity    # Total intensity\nmeta.coverage           # Fraction covered\nmeta.n_paths            # Number of paths\nmeta.mode               # 'sector_specific' or 'system_wide'\nmeta.satellite          # Satellite name\nmeta.n_sectors          # Total sectors in system\n\n# Export metadata\nmeta_dict = meta.to_dict()\n"})})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8193(e,t,n){n.d(t,{R:()=>i,x:()=>r});var a=n(758);const s={},o=a.createContext(s);function i(e){const t=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(o.Provider,{value:t},e.children)}}}]);