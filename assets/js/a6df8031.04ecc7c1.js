"use strict";(globalThis.webpackChunkfastspa_documentation=globalThis.webpackChunkfastspa_documentation||[]).push([[368],{1754(e,t,n){n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"api/data-classes","title":"Data Classes","description":"Core data structures used in FastSPA.","source":"@site/docs/api/data-classes.md","sourceDirName":"api","slug":"/api/data-classes","permalink":"/docs/api/data-classes","draft":false,"unlisted":false,"editUrl":"https://docs.fastspa.net/edit/main/docs/docs/api/data-classes.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Factory Functions","permalink":"/docs/api/factory-functions"},"next":{"title":"IPF (Iterative Proportional Fitting) API","permalink":"/docs/api/ipf"}}');var r=n(6070),i=n(8193);const d={sidebar_position:3},l="Data Classes",c={},a=[{value:"Path",id:"path",level:2},{value:"Properties",id:"properties",level:3},{value:"Example",id:"example",level:3},{value:"PathCollection",id:"pathcollection",level:2},{value:"Properties",id:"properties-1",level:3},{value:"Methods",id:"methods",level:3},{value:"SPAResult",id:"sparesult",level:2},{value:"Properties",id:"properties-2",level:3},{value:"Methods",id:"methods-1",level:3},{value:"Example",id:"example-1",level:3},{value:"AnalysisMetadata",id:"analysismetadata",level:2},{value:"Methods",id:"methods-2",level:3},{value:"Example",id:"example-2",level:3},{value:"SectorConcordance",id:"sectorconcordance",level:2},{value:"Class Methods",id:"class-methods",level:3},{value:"Instance Methods",id:"instance-methods",level:3},{value:"SatelliteWithConcordance",id:"satellitewithconcordance",level:2},{value:"Methods",id:"methods-3",level:3},{value:"Example",id:"example-3",level:3}];function o(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"data-classes",children:"Data Classes"})}),"\n",(0,r.jsx)(t.p,{children:"Core data structures used in FastSPA."}),"\n",(0,r.jsx)(t.h2,{id:"path",children:"Path"}),"\n",(0,r.jsx)(t.p,{children:"A single supply chain pathway."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:"@dataclass(frozen=True, slots=True)\r\nclass Path:\r\n    nodes: Tuple[int, ...]           # Sector indices (root to leaf)\r\n    contribution: float               # Fraction of total intensity\r\n    direct_intensity: float           # Direct intensity at leaf node\r\n    cumulative_weight: float          # Product of A-matrix coefficients\n"})}),"\n",(0,r.jsx)(t.h3,{id:"properties",children:"Properties"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Property"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"nodes"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"Tuple[int, ...]"})}),(0,r.jsx)(t.td,{children:"Sector indices in the path"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"sectors"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"Tuple[str, ...]"})}),(0,r.jsx)(t.td,{children:"Sector names (if available)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"contribution"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"float"})}),(0,r.jsx)(t.td,{children:"Fraction of total intensity"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"direct_intensity"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"float"})}),(0,r.jsx)(t.td,{children:"Intensity at emission source"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"cumulative_weight"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"float"})}),(0,r.jsx)(t.td,{children:"Product of path coefficients"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"depth"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"int"})}),(0,r.jsx)(t.td,{children:"Number of upstream stages"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"root"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"int"})}),(0,r.jsx)(t.td,{children:"Target sector (first node)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"leaf"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"int"})}),(0,r.jsx)(t.td,{children:"Final upstream sector"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"example",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:"path = paths[0]\r\nprint(path.nodes)        # (42, 15, 3)\r\nprint(path.sectors)      # ('Electricity', 'Coal', 'Mining')\r\nprint(path.contribution) # 0.0523\r\nprint(path.depth)        # 2\r\nprint(path)              # \"  5.23% | Electricity \u2192 Coal \u2192 Mining\"\n"})}),"\n",(0,r.jsx)(t.h2,{id:"pathcollection",children:"PathCollection"}),"\n",(0,r.jsx)(t.p,{children:"A collection of paths with analysis methods."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'@dataclass\r\nclass PathCollection:\r\n    paths: List[Path]\r\n    target_sector: int\r\n    total_intensity: float\r\n    satellite_name: str = "intensity"\r\n    metadata: Optional[AnalysisMetadata] = None\n'})}),"\n",(0,r.jsx)(t.h3,{id:"properties-1",children:"Properties"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Property"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"paths"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"List[Path]"})}),(0,r.jsx)(t.td,{children:"List of Path objects"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"target_sector"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"int"})}),(0,r.jsx)(t.td,{children:"Index of analyzed sector"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"total_intensity"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"float"})}),(0,r.jsx)(t.td,{children:"Total intensity for target"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"satellite_name"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"str"})}),(0,r.jsx)(t.td,{children:"Name of satellite analyzed"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"metadata"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"AnalysisMetadata"})}),(0,r.jsx)(t.td,{children:"Analysis parameters"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"coverage"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"float"})}),(0,r.jsx)(t.td,{children:"Sum of all contributions"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"methods",children:"Methods"}),"\n",(0,r.jsxs)(t.p,{children:["See ",(0,r.jsx)(t.a,{href:"../concepts/pathcollection",children:"PathCollection"})," for full documentation."]}),"\n",(0,r.jsx)(t.h2,{id:"sparesult",children:"SPAResult"}),"\n",(0,r.jsx)(t.p,{children:"Results for multiple satellites."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:"@dataclass\r\nclass SPAResult:\r\n    results: Dict[str, PathCollection]\r\n    target_sector: int\n"})}),"\n",(0,r.jsx)(t.h3,{id:"properties-2",children:"Properties"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Property"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"satellites"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"List[str]"})}),(0,r.jsx)(t.td,{children:"Names of satellites"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"methods-1",children:"Methods"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Method"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"__getitem__(key)"})}),(0,r.jsx)(t.td,{children:"Get PathCollection by satellite name"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"__iter__()"})}),(0,r.jsx)(t.td,{children:"Iterate over satellite names"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"items()"})}),(0,r.jsx)(t.td,{children:"Get (name, PathCollection) pairs"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"to_dataframe()"})}),(0,r.jsx)(t.td,{children:"Combine all to DataFrame"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"example-1",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'result = spa.analyze(sector=42, depth=8)\r\n\r\n# Access by name\r\nghg_paths = result["ghg"]\r\n\r\n# Iterate\r\nfor name in result:\r\n    print(f"{name}: {len(result[name])} paths")\r\n\r\n# Combined DataFrame\r\ndf = result.to_dataframe()\n'})}),"\n",(0,r.jsx)(t.h2,{id:"analysismetadata",children:"AnalysisMetadata"}),"\n",(0,r.jsx)(t.p,{children:"Metadata for reproducibility."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:"@dataclass(frozen=True)\r\nclass AnalysisMetadata:\r\n    analysis_date: datetime\r\n    sector: Union[int, str]\r\n    sector_name: Optional[str]\r\n    threshold: float\r\n    threshold_type: str\r\n    max_depth: int\r\n    total_intensity: float\r\n    coverage: float\r\n    n_paths: int\r\n    mode: str\r\n    satellite: str\r\n    n_sectors: int\n"})}),"\n",(0,r.jsx)(t.h3,{id:"methods-2",children:"Methods"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Method"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"to_dict()"})}),(0,r.jsx)(t.td,{children:"Convert to dictionary"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"example-2",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'meta = paths.metadata\r\nprint(f"Analyzed: {meta.sector_name}")\r\nprint(f"Mode: {meta.mode}")\r\nprint(f"Coverage: {meta.coverage:.1%}")\r\nprint(f"Date: {meta.analysis_date}")\n'})}),"\n",(0,r.jsx)(t.h2,{id:"sectorconcordance",children:"SectorConcordance"}),"\n",(0,r.jsx)(t.p,{children:"Maps between sector classifications."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:"@dataclass\r\nclass SectorConcordance:\r\n    matrix: NDArray                    # Allocation matrix\r\n    source_sectors: Sequence[str]      # Source classification\r\n    target_sectors: Sequence[str]      # Target classification\r\n    metadata: Optional[ConcordanceMetadata] = None\n"})}),"\n",(0,r.jsx)(t.h3,{id:"class-methods",children:"Class Methods"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Method"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"from_supply_use_table()"})}),(0,r.jsx)(t.td,{children:"Create from supply-use data"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"instance-methods",children:"Instance Methods"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Method"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"allocate(source_values)"})}),(0,r.jsx)(t.td,{children:"Allocate values to target sectors"})]})})]}),"\n",(0,r.jsx)(t.h2,{id:"satellitewithconcordance",children:"SatelliteWithConcordance"}),"\n",(0,r.jsx)(t.p,{children:"Satellite data with sector mapping."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:"@dataclass\r\nclass SatelliteWithConcordance:\r\n    intensities: NDArray              # Source classification intensities\r\n    concordance: SectorConcordance    # Mapping to target\r\n    name: str                         # Satellite name\r\n    unit: Optional[str] = None        # Unit description\n"})}),"\n",(0,r.jsx)(t.h3,{id:"methods-3",children:"Methods"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Method"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"get_intensities_target()"})}),(0,r.jsx)(t.td,{children:"Get intensities in target classification"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"example-3",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'from fastspa import SatelliteWithConcordance, SectorConcordance\r\n\r\nsatellite = SatelliteWithConcordance(\r\n    intensities=source_intensities,\r\n    concordance=concordance,\r\n    name="carbon",\r\n    unit="kg CO2-e / AUD"\r\n)\r\n\r\n# Use with SPA\r\nspa = SPA(A, satellite, sectors=concordance.target_sectors)\n'})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8193(e,t,n){n.d(t,{R:()=>d,x:()=>l});var s=n(758);const r={},i=s.createContext(r);function d(e){const t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);