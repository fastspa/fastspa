"use strict";(globalThis.webpackChunkfastspa_documentation=globalThis.webpackChunkfastspa_documentation||[]).push([[23],{8193(e,n,t){t.d(n,{R:()=>l,x:()=>c});var s=t(758);const i={},r=s.createContext(i);function l(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(r.Provider,{value:n},e.children)}},9298(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"api/spa-class","title":"SPA Class","description":"The main class for Structural Path Analysis.","source":"@site/docs/api/spa-class.md","sourceDirName":"api","slug":"/api/spa-class","permalink":"/docs/api/spa-class","draft":false,"unlisted":false,"editUrl":"https://docs.fastspa.net/edit/main/docs/docs/api/spa-class.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Sector Adjustments with IPF","permalink":"/docs/guides/sector-adjustments"},"next":{"title":"Factory Functions","permalink":"/docs/api/factory-functions"}}');var i=t(6070),r=t(8193);const l={sidebar_position:1},c="SPA Class",d={},a=[{value:"Constructor",id:"constructor",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Example",id:"example",level:3},{value:"Properties",id:"properties",level:2},{value:"Methods",id:"methods",level:2},{value:"analyze()",id:"analyze",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Returns",id:"returns",level:4},{value:"Example",id:"example-1",level:4},{value:"stream()",id:"stream",level:3},{value:"analyze_many()",id:"analyze_many",level:3},{value:"hotspots()",id:"hotspots",level:3},{value:"compare_sectors()",id:"compare_sectors",level:3},{value:"total_intensity()",id:"total_intensity",level:3},{value:"sensitivity()",id:"sensitivity",level:3},{value:"monte_carlo()",id:"monte_carlo",level:3},{value:"consequential()",id:"consequential",level:3},{value:"analyze_time_series()",id:"analyze_time_series",level:3}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"spa-class",children:"SPA Class"})}),"\n",(0,i.jsx)(n.p,{children:"The main class for Structural Path Analysis."}),"\n",(0,i.jsx)(n.h2,{id:"constructor",children:"Constructor"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'SPA(\n    A: ArrayLike,\n    intensities: Union[ArrayLike, Dict[str, ArrayLike], SatelliteWithConcordance],\n    sectors: Optional[Sequence[str]] = None,\n    mode: Literal["sector_specific", "system_wide"] = "sector_specific",\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"A"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ArrayLike"})}),(0,i.jsx)(n.td,{children:"Technical coefficients matrix (n\xd7n). Can be dense NumPy array or scipy sparse matrix."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"intensities"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"ArrayLike"})," or ",(0,i.jsx)(n.code,{children:"Dict"})]}),(0,i.jsx)(n.td,{children:"Direct intensities. Either a 1D array (single satellite) or dict mapping names to arrays."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sectors"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Sequence[str]"})}),(0,i.jsx)(n.td,{children:"Optional list of sector names for readable output."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"mode"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"str"})}),(0,i.jsxs)(n.td,{children:["Analysis mode: ",(0,i.jsx)(n.code,{children:'"sector_specific"'})," (default) or ",(0,i.jsx)(n.code,{children:'"system_wide"'}),"."]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from fastspa import SPA\n\nspa = SPA(\n    A_matrix,\n    {"ghg": ghg_vector, "water": water_vector},\n    sectors=["Agriculture", "Mining", "Manufacturing"],\n    mode="system_wide",\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Property"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"n_sectors"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"int"})}),(0,i.jsx)(n.td,{children:"Number of sectors in the system"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"mode"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"str"})}),(0,i.jsxs)(n.td,{children:["Analysis mode (",(0,i.jsx)(n.code,{children:'"sector_specific"'})," or ",(0,i.jsx)(n.code,{children:'"system_wide"'}),")"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"satellites"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"List[str]"})}),(0,i.jsx)(n.td,{children:"Names of available satellites"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sectors"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Tuple[str, ...]"})}),(0,i.jsx)(n.td,{children:"Sector names (if provided)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"A"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"NDArray"})}),(0,i.jsx)(n.td,{children:"Technical coefficients matrix"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"L"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"NDArray"})}),(0,i.jsx)(n.td,{children:"Leontief inverse (computed lazily)"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,i.jsx)(n.h3,{id:"analyze",children:"analyze()"}),"\n",(0,i.jsx)(n.p,{children:"Run structural path analysis for a target sector."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'analyze(\n    sector: Union[int, str],\n    depth: int = 8,\n    *,\n    threshold: float = 0.001,\n    threshold_type: Literal["percentage", "absolute"] = "percentage",\n    satellite: Optional[str] = None,\n    max_paths: Optional[int] = None,\n    include_stage_0: bool = True,\n) -> Union[PathCollection, SPAResult]\n'})}),"\n",(0,i.jsx)(n.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sector"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"int"})," or ",(0,i.jsx)(n.code,{children:"str"})]}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Target sector (1-indexed integer or name)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"depth"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"int"})}),(0,i.jsx)(n.td,{children:"8"}),(0,i.jsx)(n.td,{children:"Maximum supply chain depth to explore"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"threshold"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"float"})}),(0,i.jsx)(n.td,{children:"0.001"}),(0,i.jsx)(n.td,{children:"Minimum contribution threshold"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"threshold_type"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"str"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'"percentage"'})}),(0,i.jsxs)(n.td,{children:["Type of threshold: ",(0,i.jsx)(n.code,{children:'"percentage"'})," or ",(0,i.jsx)(n.code,{children:'"absolute"'})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"satellite"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"str"})}),(0,i.jsx)(n.td,{children:"None"}),(0,i.jsx)(n.td,{children:"Specific satellite to analyze (None = all)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"max_paths"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"int"})}),(0,i.jsx)(n.td,{children:"None"}),(0,i.jsx)(n.td,{children:"Maximum number of paths to return"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"include_stage_0"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bool"})}),(0,i.jsx)(n.td,{children:"True"}),(0,i.jsx)(n.td,{children:"Include Stage 0 (direct requirements)"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"returns",children:"Returns"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"PathCollection"})," if single satellite"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"SPAResult"})," if multiple satellites"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"example-1",children:"Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Basic analysis\npaths = spa.analyze(sector=42, depth=8)\n\n# By sector name\npaths = spa.analyze(sector="Electricity", depth=8)\n\n# With custom threshold\npaths = spa.analyze(sector=42, threshold=0.0001, threshold_type="absolute")\n\n# Limit results\npaths = spa.analyze(sector=42, max_paths=100)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"stream",children:"stream()"}),"\n",(0,i.jsx)(n.p,{children:"Stream paths as they are discovered (memory-efficient)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'stream(\n    sector: Union[int, str],\n    depth: int = 8,\n    *,\n    threshold: float = 0.001,\n    threshold_type: Literal["percentage", "absolute"] = "percentage",\n    satellite: Optional[str] = None,\n) -> Iterator[Path]\n'})}),"\n",(0,i.jsx)(n.p,{children:"Returns paths in discovery order (not sorted by contribution)."}),"\n",(0,i.jsx)(n.h3,{id:"analyze_many",children:"analyze_many()"}),"\n",(0,i.jsx)(n.p,{children:"Analyze multiple sectors at once."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"analyze_many(\n    sectors: Sequence[Union[int, str]],\n    depth: int = 8,\n    **kwargs,\n) -> Dict[Union[int, str], Union[PathCollection, SPAResult]]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"hotspots",children:"hotspots()"}),"\n",(0,i.jsx)(n.p,{children:"Identify emission hotspots (sectors contributing most to total)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"hotspots(\n    sector: Union[int, str],\n    depth: int = 8,\n    *,\n    satellite: Optional[str] = None,\n    top_n: int = 10,\n) -> List[Tuple[int, float, str]]\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Returns list of ",(0,i.jsx)(n.code,{children:"(sector_index, contribution, sector_name)"})," tuples."]}),"\n",(0,i.jsx)(n.h3,{id:"compare_sectors",children:"compare_sectors()"}),"\n",(0,i.jsx)(n.p,{children:"Compare SPA results across multiple sectors."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"compare_sectors(\n    sectors: Sequence[Union[int, str]],\n    depth: int = 8,\n    *,\n    satellite: Optional[str] = None,\n) -> pd.DataFrame\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Returns DataFrame with columns: ",(0,i.jsx)(n.code,{children:"sector"}),", ",(0,i.jsx)(n.code,{children:"sector_name"}),", ",(0,i.jsx)(n.code,{children:"total_intensity"}),", ",(0,i.jsx)(n.code,{children:"num_paths"}),", ",(0,i.jsx)(n.code,{children:"coverage"}),", ",(0,i.jsx)(n.code,{children:"top_path_contribution"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"total_intensity",children:"total_intensity()"}),"\n",(0,i.jsx)(n.p,{children:"Get total intensities for a satellite."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"total_intensity(satellite: Optional[str] = None) -> NDArray\n"})}),"\n",(0,i.jsx)(n.p,{children:"Returns array of total intensities for each sector."}),"\n",(0,i.jsx)(n.h3,{id:"sensitivity",children:"sensitivity()"}),"\n",(0,i.jsx)(n.p,{children:"Elasticities of a target sector's total intensity to each direct intensity input."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"sensitivity(sector: Union[int, str], *, satellite: Optional[str] = None) -> Dict[int, float]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"monte_carlo",children:"monte_carlo()"}),"\n",(0,i.jsx)(n.p,{children:"Monte Carlo (or Latin Hypercube) uncertainty propagation."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'monte_carlo(\n    sector: Union[int, str],\n    depth: int = 8,\n    *,\n    n_samples: int = 200,\n    intensity_cv: Union[float, ArrayLike] = 0.1,\n    sampling: Literal["random", "lhs"] = "random",\n    distribution: Literal["lognormal", "normal"] = "lognormal",\n    seed: Optional[int] = None,\n) -> MonteCarloResult\n'})}),"\n",(0,i.jsxs)(n.p,{children:["See: ",(0,i.jsx)(n.code,{children:"guides/uncertainty"})," for interpretation and examples."]}),"\n",(0,i.jsx)(n.h3,{id:"consequential",children:"consequential()"}),"\n",(0,i.jsx)(n.p,{children:"Consequential (perturbation / policy scenario) analysis."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"consequential(\n    sector: Union[int, str],\n    depth: int = 8,\n    *,\n    satellite: Optional[str] = None,\n    intensity_multiplier: Optional[ArrayLike] = None,\n    intensity_delta: Optional[ArrayLike] = None,\n    A_multiplier: Optional[ArrayLike] = None,\n    A_delta: Optional[ArrayLike] = None,\n) -> ConsequentialResult\n"})}),"\n",(0,i.jsx)(n.h3,{id:"analyze_time_series",children:"analyze_time_series()"}),"\n",(0,i.jsx)(n.p,{children:"Multi-year / dynamic SPA."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"analyze_time_series(\n    series: Mapping[Any, Union[SPA, Tuple[ArrayLike, Any]]],\n    sector: Union[int, str],\n    depth: int = 8,\n    *,\n    satellite: Optional[str] = None,\n) -> TemporalSPAResult\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);