"use strict";(globalThis.webpackChunkfastspa_documentation=globalThis.webpackChunkfastspa_documentation||[]).push([[477],{8048(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"api/factory-functions","title":"Factory Functions","description":"Convenience functions for creating SPA instances from different data sources.","source":"@site/docs/api/factory-functions.md","sourceDirName":"api","slug":"/api/factory-functions","permalink":"/docs/api/factory-functions","draft":false,"unlisted":false,"editUrl":"https://docs.fastspa.net/edit/main/docs/docs/api/factory-functions.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"SPA Class","permalink":"/docs/api/spa-class"},"next":{"title":"Data Classes","permalink":"/docs/api/data-classes"}}');var t=s(6070),i=s(8193);const d={sidebar_position:2},c="Factory Functions",l={},a=[{value:"from_leontief()",id:"from_leontief",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Example",id:"example",level:3},{value:"from_dataframe()",id:"from_dataframe",level:2},{value:"Parameters",id:"parameters-1",level:3},{value:"Example",id:"example-1",level:3},{value:"from_csv()",id:"from_csv",level:2},{value:"Parameters",id:"parameters-2",level:3},{value:"Example",id:"example-2",level:3},{value:"from_io_table()",id:"from_io_table",level:2},{value:"Parameters",id:"parameters-3",level:3},{value:"Notes",id:"notes",level:3},{value:"Example",id:"example-3",level:3}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"factory-functions",children:"Factory Functions"})}),"\n",(0,t.jsx)(n.p,{children:"Convenience functions for creating SPA instances from different data sources."}),"\n",(0,t.jsx)(n.h2,{id:"from_leontief",children:"from_leontief()"}),"\n",(0,t.jsx)(n.p,{children:"Create SPA from a pre-computed Leontief inverse."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from_leontief(\r\n    L: ArrayLike,\r\n    direct_intensities: Union[ArrayLike, Dict[str, ArrayLike]],\r\n    sectors: Optional[Sequence[str]] = None,\r\n    mode: Literal["sector_specific", "system_wide"] = "system_wide",\r\n) -> SPA\n'})}),"\n",(0,t.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"L"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ArrayLike"})}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Leontief inverse matrix (I - A)^(-1)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"direct_intensities"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"ArrayLike"})," or ",(0,t.jsx)(n.code,{children:"Dict"})]}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Direct intensity vector(s)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"sectors"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Sequence[str]"})}),(0,t.jsx)(n.td,{children:"None"}),(0,t.jsx)(n.td,{children:"Optional sector names"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"mode"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"str"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"system_wide"'})}),(0,t.jsx)(n.td,{children:"Analysis mode"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from fastspa import from_leontief\r\n\r\n# If you already have L computed\r\nspa = from_leontief(L_matrix, intensities, sectors)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"from_dataframe",children:"from_dataframe()"}),"\n",(0,t.jsx)(n.p,{children:"Create SPA from pandas DataFrames."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from_dataframe(\r\n    A_df: pd.DataFrame,\r\n    intensities_df: pd.DataFrame,\r\n    intensity_columns: Optional[List[str]] = None,\r\n) -> SPA\n"})}),"\n",(0,t.jsx)(n.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"A_df"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"DataFrame"})}),(0,t.jsx)(n.td,{children:"A-matrix with sector names as index and columns"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"intensities_df"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"DataFrame"})}),(0,t.jsx)(n.td,{children:"Intensities with sector index"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"intensity_columns"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"List[str]"})}),(0,t.jsx)(n.td,{children:"Which columns to use (None = all numeric)"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"example-1",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from fastspa import from_dataframe\r\nimport pandas as pd\r\n\r\nA_df = pd.read_csv("A.csv", index_col=0)\r\nintensities_df = pd.read_csv("intensities.csv", index_col=0)\r\n\r\nspa = from_dataframe(A_df, intensities_df, intensity_columns=["CO2", "Water"])\n'})}),"\n",(0,t.jsx)(n.h2,{id:"from_csv",children:"from_csv()"}),"\n",(0,t.jsx)(n.p,{children:"Create SPA from CSV files."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from_csv(\r\n    A_path: str,\r\n    intensities_path: str,\r\n    intensity_columns: Optional[List[str]] = None,\r\n    sectors_path: Optional[str] = None,\r\n    mode: Literal["sector_specific", "system_wide"] = "sector_specific",\r\n) -> SPA\n'})}),"\n",(0,t.jsx)(n.h3,{id:"parameters-2",children:"Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"A_path"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"str"})}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Path to A-matrix CSV"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"intensities_path"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"str"})}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Path to intensities CSV"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"intensity_columns"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"List[str]"})}),(0,t.jsx)(n.td,{children:"None"}),(0,t.jsx)(n.td,{children:"Columns to use (None = all numeric)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"sectors_path"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"str"})}),(0,t.jsx)(n.td,{children:"None"}),(0,t.jsx)(n.td,{children:"Path to sector names file"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"mode"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"str"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"sector_specific"'})}),(0,t.jsx)(n.td,{children:"Analysis mode"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"example-2",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from fastspa import from_csv\r\n\r\nspa = from_csv(\r\n    "A_matrix.csv",\r\n    "intensities.csv",\r\n    intensity_columns=["ghg", "water"],\r\n)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"from_io_table",children:"from_io_table()"}),"\n",(0,t.jsx)(n.p,{children:"Create SPA from an IO table in XLSX format (experimental)."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from_io_table(\r\n    xlsx_path: str,\r\n    sheet_name: str = "Table 5",\r\n    intensities: Optional[ArrayLike] = None,\r\n) -> SPA\n'})}),"\n",(0,t.jsx)(n.h3,{id:"parameters-3",children:"Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"xlsx_path"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"str"})}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Path to XLSX file"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"sheet_name"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"str"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"Table 5"'})}),(0,t.jsx)(n.td,{children:"Sheet containing IO table"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"intensities"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ArrayLike"})}),(0,t.jsx)(n.td,{children:"None"}),(0,t.jsx)(n.td,{children:"Direct intensities (random if not provided)"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"notes",children:"Notes"}),"\n",(0,t.jsx)(n.p,{children:"This function automatically:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Extracts the largest continuous numeric matrix as transactions"}),"\n",(0,t.jsx)(n.li,{children:"Identifies sector names from adjacent rows/columns"}),"\n",(0,t.jsx)(n.li,{children:"Computes technical coefficients"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example-3",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from fastspa import from_io_table\r\n\r\nspa = from_io_table(\r\n    "national_io_table.xlsx",\r\n    sheet_name="Transactions",\r\n    intensities=my_emissions_vector\r\n)\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8193(e,n,s){s.d(n,{R:()=>d,x:()=>c});var r=s(758);const t={},i=r.createContext(t);function d(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);